<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>iPhone 自适应放大布局（分散按钮）</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      background: #000000;
      overflow: hidden;
    }
    
    /* 包裹容器 - 固定基准尺寸 */
    .wrapper {
      position: relative;
      width: 393px;
      height: 852px;
      transform-origin: center center;
      margin: auto;
      z-index: 1;
    }
    
    /* 背景图 */
    .background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      object-fit: cover;
    }
    
    /* 信息标签 */
    .info {
      position: absolute;
      left: 117px;
      transform: translateX(-50%);
      color: black;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      font-size: 20px;
      font-weight: 400;
      text-align: center;
      display: flex;
      align-items: baseline;
      gap: 8px;
      z-index: 3;
    }
    .info .en {
      font-size: 18px;
      position: relative;
      top: 1px;
      left: 1px;
      color: #555;
    }
    .name {
      top: 200px;
      left: 90px;
    }
    .area {
      top: 320px;
      left: 87px;
    }
    
    /* 主卡片 */
    .card-3d {
      position: absolute;
      top:400px;
      left: 240px;
      transform: translate(-50%, -50%);
      width: 480px;
      height: auto;
      z-index: 1;
      perspective: 900px;
      transform-style: preserve-3d;
    }
    .card-3d .card-face {
      display: block;
      width: 480px;
      height: auto;
      transform-origin: center;
      transition: transform 360ms cubic-bezier(.22,.61,.36,1), filter 360ms ease, box-shadow 360ms ease;
      will-change: transform, filter;
      filter: brightness(0.99) contrast(1.01);
      box-shadow: 0 10px 22px rgba(0,0,0,0.22);
      pointer-events: none;
    }
    .card-3d .hotspots {
      position: absolute;
      inset: 0;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      z-index: 2;
    }
    .card-3d .spot {
      position: relative;
      width: 100%;
      height: 100%;
      cursor: pointer;
      background: transparent;
    }
    /* 悬停亮度与微缩放（更柔和） */
    .card-3d:has(.spot:hover) .card-face {
      filter: brightness(1.03) contrast(1.02);
      box-shadow: 0 16px 30px rgba(0,0,0,0.30);
    }
    /* 方向分区（九宫格）更自然的角度 */
    .card-3d:has(.spot.nw:hover) .card-face { transform: rotateX(6deg) rotateY(-6deg) translateZ(6px); }
    .card-3d:has(.spot.n:hover)  .card-face { transform: rotateX(6deg) rotateY(0deg)  translateZ(6px); }
    .card-3d:has(.spot.ne:hover) .card-face { transform: rotateX(6deg) rotateY(6deg)  translateZ(6px); }
    .card-3d:has(.spot.w:hover)  .card-face { transform: rotateX(0deg) rotateY(-8deg) translateZ(4px); }
    .card-3d:has(.spot.c:hover)  .card-face { transform: rotateX(0deg) rotateY(0deg)  scale(1.015) translateZ(8px); }
    .card-3d:has(.spot.e:hover)  .card-face { transform: rotateX(0deg) rotateY(8deg)  translateZ(4px); }
    .card-3d:has(.spot.sw:hover) .card-face { transform: rotateX(-6deg) rotateY(-6deg) translateZ(6px); }
    .card-3d:has(.spot.s:hover)  .card-face { transform: rotateX(-6deg) rotateY(0deg)  translateZ(6px); }
    .card-3d:has(.spot.se:hover) .card-face { transform: rotateX(-6deg) rotateY(6deg)  translateZ(6px); }

    
    .tab-img {
      position: absolute;
      top: 220px;
      left: 160px;
      transform: translateX(-50%);
      width: 280px;
      height: auto;
      z-index: 2;
      pointer-events: none;
    }

    /* 覆盖在卡片上的黑色按钮 */
    .blackbutton-img {
      position: absolute;
      top: 614px;
      left: 185px;
      transform: translate(-50%, -50%);
      width: 280px;
      height: auto;
      z-index: 2;
    }
    .blackbutton-label {
      position: absolute;
      top: 614px;
      left: 185px;
      transform: translate(-50%, -50%);
      z-index: 3;
      font-size: 18px;
      font-weight: 700;
      color: #ffffff;
      text-shadow: 0 2px 4px rgba(0,0,0,0.6), 0 0 2px rgba(0,0,0,0.8);
      -webkit-text-stroke: 0.6px rgba(0,0,0,0.6);
      white-space: nowrap;
      pointer-events: none;
      user-select: none;
    }
    
    /* 按钮独立定位 */
    .btn {
      display: block;
      width: 100px;
      height: auto;
      cursor: pointer;
      transition: transform 0.2s ease, filter 0.2s ease;
    }
    .btn:hover {
      transform: scale(1.08);
      filter: brightness(1.2);
    }
    .btn:active {
      transform: scale(0.75);
    }
    
    /* 按钮包裹与标签 */
    .btn-wrap {
      position: absolute;
      z-index: 3;
      text-align: center;
    }
    .btn-label {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 14px;
      font-weight: 700;
      color: black;
      white-space: nowrap;
      user-select: none;
      pointer-events: none;
    }

    /* 各按钮位置（包裹容器定位） */
    .btn-wrap.asia { top: 360px; left: 44px; }
    .btn-wrap.us { top: 442px; left: 44px; }
    .btn-wrap.se { top: 360px; left: 160px; }
    .btn-wrap.oc { top: 402px; left: 194px; }
    .btn-wrap.eu { top: 402px; left: 44px; }
    .btn-wrap.other { top: 482px; left: 44px; }

    /* 各按钮尺寸（作用于图片本体） */
    .btn-wrap.us .btn { width: 200px; }
    .btn-wrap.se .btn { width: 140px; }
    .btn-wrap.oc .btn { width: 140px; }
    .btn-wrap.eu .btn { width: 140px; }
  </style>
</head>
<body>
    <img src="./background.svg" alt="背景" class="background" />
  <div class="wrapper">
    <!-- 背景图 -->
    
    <!-- 名称与区域标签 -->
    <div class="info name">
      <span class="jp">名前</span>
      <span class="en">Name</span>
    </div>
    <div class="info area">
      <span class="jp">地域</span>
      <span class="en">Area</span>
    </div>
    
    <!-- 独立按钮（带可见文字标签） -->
      <div class="btn-wrap asia">
        <img src="./buttonasia.svg" class="btn" alt="Asia アジア" title="Asia アジア" />
        <div class="btn-label">Asia アジア</div>
      </div>
      <div class="btn-wrap us">
        <img src="./buttonus.svg" class="btn" alt="The Americas アメリカ大陸" title="The Americas アメリカ大陸" />
        <div class="btn-label">The Americas アメリカ大陸</div>
      </div>
      <div class="btn-wrap se">
        <img src="./buttonse.svg" class="btn" alt="SE Asia 東南アジア" title="SE Asia 東南アジア" />
        <div class="btn-label">SE Asia 東南アジア</div>
      </div>
      <div class="btn-wrap oc">
        <img src="./buttonoc.svg" class="btn" alt="Oceania オセアニア" title="Oceania オセアニア" />
        <div class="btn-label">Oceania オセアニア</div>
      </div>
      <div class="btn-wrap eu">
        <img src="./buttoneu.svg" class="btn" alt="Europe ヨーロッパ" title="Europe ヨーロッパ" />
        <div class="btn-label">Europe ヨーロッパ</div>
      </div>
      <div class="btn-wrap other">
        <img src="./buttonother.svg" class="btn" alt="Other ほか" title="Other ほか" />
        <div class="btn-label">Other ほか</div>
      </div>
    
    <!-- 主视觉（CSS 3D 互动卡片，无 JS） -->
    <div class="card-3d">
      <img src="./card.svg" alt="card" class="card-face" />
      <div class="hotspots">
        <div class="spot nw"></div>
        <div class="spot n"></div>
        <div class="spot ne"></div>
        <div class="spot w"></div>
        <div class="spot c"></div>
        <div class="spot e"></div>
        <div class="spot sw"></div>
        <div class="spot s"></div>
        <div class="spot se"></div>
      </div>
    </div>
    <!-- 覆盖在卡片上的黑色按钮（确保 blackbutton.svg 存在于同目录） -->
    <img src="./blackbutton.svg" alt="black button" class="blackbutton-img" />
    <div class="blackbutton-label">おすすめ</div>
    <object id="tabObj" class="tab-img" type="image/svg+xml" data="./tab1.svg" aria-label="Tab"></object>
  </div>

  <script>
    function autoScale() {
      const wrapper = document.querySelector('.wrapper');
      const baseWidth = 393;
      const baseHeight = 852;
      const scaleX = window.innerWidth / baseWidth;
      const scaleY = window.innerHeight / baseHeight;
      const scale = Math.min(scaleX, scaleY);
      wrapper.style.transform = `scale(${scale})`;
    }
    
    window.addEventListener('resize', autoScale);
    window.addEventListener('load', autoScale);
    autoScale();

    // 将可编辑区域注入到 tab1.svg 内部（foreignObject）
    window.addEventListener('load', () => {
      const obj = document.getElementById('tabObj');
      if (!obj) return;
      obj.addEventListener('load', () => {
        const svgDoc = obj.contentDocument;
        if (!svgDoc) return;
        const svgEl = svgDoc.querySelector('svg');
        if (!svgEl) return;

        const ns = 'http://www.w3.org/2000/svg';
        const vb = svgEl.viewBox && svgEl.viewBox.baseVal ? svgEl.viewBox.baseVal : null;
        const svgW = vb && vb.width ? vb.width : (svgEl.width && svgEl.width.baseVal && svgEl.width.baseVal.value ? svgEl.width.baseVal.value : 300);
        const svgH = vb && vb.height ? vb.height : (svgEl.height && svgEl.height.baseVal && svgEl.height.baseVal.value ? svgEl.height.baseVal.value : 200);

        // 预设气泡内可编辑区域（按比例定位，方便不同 viewBox）
        const x = svgW * 0.15;
        const y = svgH * 0.25;
        const w = svgW * 0.70;
        const h = svgH * 0.50;

        const fo = svgDoc.createElementNS(ns, 'foreignObject');
        fo.setAttribute('x', String(x));
        fo.setAttribute('y', String(y));
        fo.setAttribute('width', String(w));
        fo.setAttribute('height', String(h));

        const div = svgDoc.createElement('div');
        div.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');
        div.setAttribute('contenteditable', 'true');
        div.setAttribute('aria-label', 'Tab text');
        div.setAttribute('data-placeholder', 'ここに入力してください / Type here');
        div.setAttribute('style', [
          'width:100%','height:100%','display:flex','align-items:center','justify-content:center',
          'text-align:center','outline:none','background:transparent','border-radius:8px',
          'color:#000','font-size:16px','line-height:1.4','white-space:pre-wrap','word-break:break-word'
        ].join(';'));

        const style = svgDoc.createElement('style');
        style.textContent = 'div[contenteditable="true"]:empty::before{content:attr(data-placeholder);color:#888;}';

        fo.appendChild(div);
        svgEl.appendChild(style);
        svgEl.appendChild(fo);
      });
    });
</script>
</body>
</html>
